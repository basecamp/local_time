const e={config:{},run(){this.getController().processElements()},process(...e){for(const t of e)this.getController().processElement(t);return e.length},getController(){return this.controller?this.controller:this.controller=new e.Controller}};e.config.useFormat24=!1,e.config.i18n={en:{date:{dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbrDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbrMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],yesterday:"yesterday",today:"today",tomorrow:"tomorrow",on:"on {date}",formats:{default:"%b %e, %Y",thisYear:"%b %e"}},time:{am:"am",pm:"pm",past:{second:"a second ago",seconds:"{value} seconds ago",seconds:"{value} seconds ago",minute:"a minute ago",minutes:"{value} minutes ago",hour:"an hour ago",hours:"{value} hours ago",nextDay:"yesterday at {time}",days:"{value} days ago",weekday:"{weekday} at {time}",date:"on {date}"},future:{second:"in a second",seconds:"in {value} seconds",minute:"in a minute",minutes:"in {value} minutes",hour:"in an hour",hours:"in {value} hours",nextDay:"tomorrow at {time}",weekday:"{weekday} at {time}",date:"on {date}"},formats:{default:"%l:%M%P",default_24h:"%H:%M"}},datetime:{at:"{date} at {time}",formats:{default:"%B %e, %Y at %l:%M%P %Z",default_24h:"%B %e, %Y at %H:%M %Z"}}}},e.config.locale="en",e.config.defaultLocale="en",e.config.timerInterval=6e4;const t=!isNaN(Date.parse("2011-01-01T12:00:00-05:00"));e.parseDate=e=>(e=e.toString(),t||(e=function(e){const t=e.match(s);if(t){let e;const[s,r,a,n,i,o,u,c]=t;return"Z"!==c&&(e=c.replace(":","")),`${r}/${a}/${n} ${i}:${o}:${u} GMT${[e]}`}}(e)),new Date(Date.parse(e)));const s=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(Z|[-+]?[\d:]+)$/;e.elementMatchesSelector=(()=>{const e=document.documentElement,t=e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return(e,s)=>{if(e?.nodeType===Node.ELEMENT_NODE)return t.call(e,s)}})();const{config:r}=e,{i18n:a}=r;e.getI18nValue=(t="",s={locale:r.locale})=>{const{locale:n}=s,i=function(e,t){let s=e;for(var r of Array.from(t.split("."))){if(!s[r])return null;s=s[r]}return s}(a[n],t);return i||(n!==r.defaultLocale?e.getI18nValue(t,{locale:r.defaultLocale}):void 0)},e.translate=(t,s={},r)=>{let a=e.getI18nValue(t,r);for(const e in s){const t=s[e];a=a.replace(`{${e}}`,t)}return a};const{getI18nValue:n,translate:i}=e,o="function"==typeof Intl?.DateTimeFormat,u={"Central European Standard Time":"CET","Central European Summer Time":"CEST","China Standard Time":"CST","Israel Daylight Time":"IDT","Israel Standard Time":"IST","Moscow Standard Time":"MSK","Philippine Standard Time":"PHT","Singapore Standard Time":"SGT","Western Indonesia Time":"WIB"};e.knownEdgeCaseTimeZones=u,e.strftime=(()=>{const e=(r,a)=>{const c=r.getDay(),l=r.getDate(),d=r.getMonth(),h=r.getFullYear(),m=r.getHours(),g=r.getMinutes(),f=r.getSeconds();return a.replace(/%(-?)([%aAbBcdeHIlmMpPSwyYZ])/g,((a,y,p)=>{switch(p){case"%":return"%";case"a":return n("date.abbrDayNames")[c];case"A":return n("date.dayNames")[c];case"b":return n("date.abbrMonthNames")[d];case"B":return n("date.monthNames")[d];case"c":return r.toString();case"d":return t(l,y);case"e":return l;case"H":return t(m,y);case"I":return t(e(r,"%l"),y);case"l":return 0===m||12===m?12:(m+12)%12;case"m":return t(d+1,y);case"M":return t(g,y);case"p":return i("time."+(m>11?"pm":"am")).toUpperCase();case"P":return i("time."+(m>11?"pm":"am"));case"S":return t(f,y);case"w":return c;case"y":return t(h%100,y);case"Y":return h;case"Z":return function(e){let t,r,a;return(r=function(e){return Object.keys(u).find((t=>o?new Date(e).toLocaleString("en-US",{timeZoneName:"long"}).includes(t):e.toString().includes(t)))}(e))?u[r]:(a=s(e,{allowGMT:!1}))||(a=function(e){const t=e.toString();let s;if(null!=(s=t.match(/\(([\w\s]+)\)$/))){const e=s[1];return/\s/.test(e)?e.match(/\b(\w)/g).join(""):e}if(null!=(s=t.match(/(\w{3,4})\s\d{4}$/)))return s[1];if(null!=(s=t.match(/(UTC[\+\-]\d+)/)))return s[1]}(e))?a:(t=s(e,{allowGMT:!0}))?t:""}(r)}}))};function t(e,t){return"-"===t?e:`0${e}`.slice(-2)}function s(e,{allowGMT:t}){if(o){const s=new Date(e).toLocaleString("en-US",{timeZoneName:"short"}).split(" ").pop();if(t||!s.includes("GMT"))return s}}return e})(),e.CalendarDate=class{static fromDate(e){return new this(e.getFullYear(),e.getMonth()+1,e.getDate())}static today(){return this.fromDate(new Date)}constructor(e,t,s){this.date=new Date(Date.UTC(e,t-1)),this.date.setUTCDate(s),this.year=this.date.getUTCFullYear(),this.month=this.date.getUTCMonth()+1,this.day=this.date.getUTCDate(),this.value=this.date.getTime()}equals(e){return e?.value===this.value}is(e){return this.equals(e)}isToday(){return this.is(this.constructor.today())}occursOnSameYearAs(e){return this.year===e?.year}occursThisYear(){return this.occursOnSameYearAs(this.constructor.today())}daysSince(e){if(e)return(this.date-e.date)/864e5}daysPassed(){return this.constructor.today().daysSince(this)}};const{strftime:c,translate:l,getI18nValue:d,config:h}=e;e.RelativeTime=class{constructor(t,s={}){this.date=t,this.calendarDate=e.CalendarDate.fromDate(this.date),this.pastPrefix=s.pastPrefix,this.futurePrefix=s.futurePrefix}toString(){return`${this.#e} ${this.#t}`.replace(/^\s+/,"")}toTimeOrDateString(){return this.calendarDate.isToday()?this.#s:this.toDateString()}toWeekdayString(){switch(this.calendarDate.daysPassed()){case 0:return l("date.today");case 1:return l("date.yesterday");case-1:return l("date.tomorrow");case 2:case 3:case 4:case 5:case 6:return this.#r;default:return""}}toDateString(){const e=this.calendarDate.occursThisYear()?d("date.formats.thisYear"):d("date.formats.default");return c(this.date,e)}get#e(){return(this.#a?this.futurePrefix:this.pastPrefix)||""}get#a(){return!this.#n}get#n(){return this.#i>0}get#i(){return(new Date).getTime()-this.date.getTime()}get#t(){return this.#o<2?this.#u("second"):this.#o<60?this.#u("seconds",{value:this.#o}):this.#o<90?this.#u("minute"):this.#c<45?this.#u("minutes",{value:this.#c}):this.#c<90?this.#u("hour"):this.#l<24?this.#u("hours",{value:this.#l}):this.#d<2?this.#u("nextDay",{time:this.#s}):this.#d<7?this.#u("weekday",{weekday:this.#r,time:this.#s}):this.#u("date",{date:this.toDateString()})}#u(e,t){return l(`time.${this.#h}.${e}`,t)}get#h(){return this.#n?"past":"future"}get#s(){const e=h.useFormat24?"default_24h":"default";return c(this.date,d(`time.formats.${e}`))}get#r(){return c(this.date,"%A")}get#d(){return Math.round(this.#l/24)}get#l(){return Math.round(this.#c/60)}get#c(){return Math.round(this.#o/60)}get#o(){return Math.round(this.#m/1e3)}get#m(){return Math.abs(this.#i)}};const{elementMatchesSelector:m}=e;e.PageObserver=class{constructor(e,t){this.selector=e,this.callback=t,this.processMutations=this.processMutations.bind(this),this.processInsertion=this.processInsertion.bind(this)}start(){this.started||(this.observeWithMutationObserver()||this.observeWithMutationEvent(),this.started=!0)}observeWithMutationObserver(){if("undefined"!=typeof MutationObserver&&null!==MutationObserver){return new MutationObserver(this.processMutations).observe(document.documentElement,{childList:!0,subtree:!0}),!0}return!1}observeWithMutationEvent(){return addEventListener("DOMNodeInserted",this.processInsertion,!1),!0}findSignificantElements(e){const t=[];return e?.nodeType===Node.ELEMENT_NODE&&(m(e,this.selector)&&t.push(e),t.push(...Array.from(e.querySelectorAll(this.selector)||[]))),t}processMutations(e){const t=[];for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)t.push(...this.findSignificantElements(e)||[]);this.notify(t)}processInsertion(e){const t=this.findSignificantElements(e.target);this.notify(t)}notify(e){e?.length>0&&"function"==typeof this.callback&&this.callback(e)}};const{parseDate:g,strftime:f,getI18nValue:y,config:p}=e,T="time[data-local]:not([data-localized])",S=e=>e.setAttribute("data-localized",""),M=(t,s)=>new e.RelativeTime(t,s);e.Controller=class{constructor(){this.processElements=this.processElements.bind(this),this.pageObserver=new e.PageObserver(T,this.processElements)}start(){this.started||(this.processElements(),this.startTimer(),this.pageObserver.start(),this.started=!0)}startTimer(){let e;(e=p.timerInterval)&&(this.timer||(this.timer=setInterval(this.processElements,e)))}processElements(e){e||(e=document.querySelectorAll(T));for(const t of Array.from(e))this.processElement(t);return e.length}processElement(e){const t=e.getAttribute("datetime"),s=e.getAttribute("data-local"),r=p.useFormat24&&e.getAttribute("data-format24")||e.getAttribute("data-format"),a=g(t);if(!isNaN(a)){if(!e.hasAttribute("title")){const t=p.useFormat24?"default_24h":"default",s=f(a,y(`datetime.formats.${t}`));e.setAttribute("title",s)}(e=>{e.setAttribute("data-processed-at",(new Date).toISOString())})(e),e.textContent=(()=>{switch(s){case"time":return S(e),f(a,r);case"date":return S(e),M(a).toDateString();case"relative":case"time-ago":return M(a,e.dataset).toString();case"time-or-date":return M(a).toTimeOrDateString();case"weekday":return M(a).toWeekdayString();case"weekday-or-date":return M(a).toWeekdayString()||M(a).toDateString()}})()}}};let b=!1;function w(){e.getController().start()}e.start=()=>{var t;b?e.run():(b=!0,"undefined"!=typeof MutationObserver&&null!==MutationObserver||(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?w():(t=w,"function"==typeof requestAnimationFrame?requestAnimationFrame(t):setTimeout(t,17)))},e.processing=()=>e.getController().started,window.LocalTime===e&&e.start();export{e as default};
